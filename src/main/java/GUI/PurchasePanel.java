/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package GUI;

import Controllers.CustomerCardListController;
import Controllers.GoodsController;
import Controllers.OrderController;
import Controllers.SettingsController;
import Models.*;
import Ultility.Cautions;
import Ultility.CustomPair;
import Ultility.FilterGoodsList;
import Ultility.IDGenerator;
import java.awt.Dimension;
import java.awt.event.KeyEvent;
import java.math.BigDecimal;
import java.math.BigInteger;
import java.time.LocalDate;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.ScrollPaneConstants;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author FPTSHOP
 */
public class PurchasePanel extends javax.swing.JPanel {

    /**
     * Creates new form orderPanel
     */
    public PurchasePanel() {
        initComponents();
        initVariables();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        proAndExpirDateBtnGroup = new javax.swing.ButtonGroup();
        invoiceInforPanel = new javax.swing.JPanel();
        orderIDLabel = new javax.swing.JLabel();
        orderIDTextField = new javax.swing.JTextField();
        jSeparator1 = new javax.swing.JSeparator();
        dateLabel = new javax.swing.JLabel();
        timeLabel = new javax.swing.JLabel();
        dateTextField = new javax.swing.JFormattedTextField();
        timeTextField = new javax.swing.JFormattedTextField();
        invoiceDetailPanel = new javax.swing.JPanel();
        aboutGoodsAndCusPanel = new javax.swing.JPanel();
        employeeAndCustomerPanel = new javax.swing.JPanel();
        cashierPhoneNumLabel = new javax.swing.JLabel();
        cashierPhoneNumText = new javax.swing.JTextField();
        customerIDLabel = new javax.swing.JLabel();
        employeeListComboBox = new javax.swing.JComboBox<>();
        customerPointLabel = new javax.swing.JLabel();
        customerPointCheckTextField = new javax.swing.JTextField();
        employeeRoleLabel = new javax.swing.JLabel();
        checkCustomerIDBtn = new javax.swing.JButton();
        customerIDText = new javax.swing.JTextField();
        goodsPanel = new javax.swing.JPanel();
        goodListScrollPane = new javax.swing.JScrollPane();
        goodsListTable = new javax.swing.JTable();
        aboutOrderPanel = new javax.swing.JPanel();
        feePanel = new javax.swing.JPanel();
        subFeePanel = new javax.swing.JPanel();
        shippingFeeLabel = new javax.swing.JLabel();
        customerMoneyLabel = new javax.swing.JLabel();
        discountLabel = new javax.swing.JLabel();
        shippingFeeText = new javax.swing.JTextField();
        customerMoneyText = new javax.swing.JTextField();
        discountText = new javax.swing.JTextField();
        pointDiscountLabel = new javax.swing.JLabel();
        pointDiscountText = new javax.swing.JTextField();
        paymentOptionLabel = new javax.swing.JLabel();
        paymentOptionCombobox = new javax.swing.JComboBox<>();
        taxLabel = new javax.swing.JLabel();
        taxText = new javax.swing.JTextField();
        mainFeePanel = new javax.swing.JPanel();
        subTotalLabel = new javax.swing.JLabel();
        discountAmountLabel = new javax.swing.JLabel();
        taxAmountLabel = new javax.swing.JLabel();
        pointDiscountAmountLabel = new javax.swing.JLabel();
        totalLabel = new javax.swing.JLabel();
        changeAmountLabel = new javax.swing.JLabel();
        subTotalTextField = new javax.swing.JTextField();
        taxAmountTextField = new javax.swing.JTextField();
        discountAmountTextField = new javax.swing.JTextField();
        pointDiscountAmountTextField = new javax.swing.JTextField();
        totalTextField = new javax.swing.JTextField();
        changeAmountTextField = new javax.swing.JTextField();
        payAnfPrintBtn = new javax.swing.JButton();
        payBtn = new javax.swing.JButton();
        orderDisplayPanel = new javax.swing.JPanel();
        mainOrderFunctionPanel = new javax.swing.JPanel();
        quantityTextField = new javax.swing.JTextField();
        quantityLabel = new javax.swing.JLabel();
        goodsIDTextField = new javax.swing.JTextField();
        addBtn = new javax.swing.JButton();
        removeBtn = new javax.swing.JButton();
        resetOrderGoodsList = new javax.swing.JButton();
        editBtn = new javax.swing.JButton();
        unitLabel = new javax.swing.JLabel();
        shipmentIDLabel = new javax.swing.JLabel();
        fromLabel = new javax.swing.JLabel();
        toLabel = new javax.swing.JLabel();
        unitComboBox = new javax.swing.JComboBox<>();
        goodsIDLabel = new javax.swing.JLabel();
        shipmentIDTextField = new javax.swing.JTextField();
        priceRangeComboBox = new javax.swing.JComboBox<>();
        priceRangeLabel = new javax.swing.JLabel();
        keyWordLabel = new javax.swing.JLabel();
        jSeparator2 = new javax.swing.JSeparator();
        productionDateRadioBtn = new javax.swing.JRadioButton();
        keyWordTextField = new javax.swing.JTextField();
        searchBtn = new javax.swing.JButton();
        expirDateRadioBtn = new javax.swing.JRadioButton();
        jSeparator3 = new javax.swing.JSeparator();
        keyWarningLabel = new javax.swing.JLabel();
        fromDateTextField = new javax.swing.JTextField();
        toDateTextField = new javax.swing.JTextField();
        filterBtn = new javax.swing.JButton();
        filterSwitchRadioBtn = new javax.swing.JRadioButton();
        orderGoodsListScrollPane = new javax.swing.JScrollPane();
        orderGoodsListTable = new javax.swing.JTable();

        setBackground(new java.awt.Color(255, 255, 255));
        setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));
        setMaximumSize(new java.awt.Dimension(2147483647, 640));
        setMinimumSize(new java.awt.Dimension(980, 600));
        setPreferredSize(new java.awt.Dimension(970, 620));
        setLayout(new java.awt.BorderLayout(0, 5));

        invoiceInforPanel.setBackground(new java.awt.Color(255, 255, 255));
        invoiceInforPanel.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED, new java.awt.Color(204, 204, 204), new java.awt.Color(51, 51, 51), new java.awt.Color(204, 204, 204), new java.awt.Color(51, 51, 51)));
        invoiceInforPanel.setOpaque(false);
        invoiceInforPanel.setPreferredSize(new java.awt.Dimension(965, 25));

        orderIDLabel.setFont(new java.awt.Font("MTO Telephone", 1, 16)); // NOI18N
        orderIDLabel.setText("MÃ HÓA ĐƠN : ");

        orderIDTextField.setEditable(false);
        orderIDTextField.setBackground(new java.awt.Color(255, 255, 255));
        orderIDTextField.setFont(new java.awt.Font("MTO Telephone", 0, 16)); // NOI18N
        orderIDTextField.setBorder(null);
        orderIDTextField.setMinimumSize(new java.awt.Dimension(64, 20));
        orderIDTextField.setPreferredSize(new java.awt.Dimension(64, 20));

        jSeparator1.setOrientation(javax.swing.SwingConstants.VERTICAL);

        dateLabel.setFont(new java.awt.Font("MTO Telephone", 1, 14)); // NOI18N
        dateLabel.setText("Ngày lập:");
        dateLabel.setMinimumSize(new java.awt.Dimension(73, 20));
        dateLabel.setPreferredSize(new java.awt.Dimension(73, 20));

        timeLabel.setFont(new java.awt.Font("MTO Telephone", 1, 14)); // NOI18N
        timeLabel.setText("Giờ :");
        timeLabel.setMinimumSize(new java.awt.Dimension(34, 20));
        timeLabel.setPreferredSize(new java.awt.Dimension(34, 20));

        dateTextField.setBorder(null);
        dateTextField.setFont(new java.awt.Font("MTO Telephone", 0, 14)); // NOI18N
        dateTextField.setPreferredSize(new java.awt.Dimension(126, 20));

        timeTextField.setBorder(null);
        timeTextField.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.DateFormatter(java.text.DateFormat.getTimeInstance())));
        timeTextField.setFont(new java.awt.Font("MTO Telephone", 0, 14)); // NOI18N
        timeTextField.setPreferredSize(new java.awt.Dimension(126, 20));

        javax.swing.GroupLayout invoiceInforPanelLayout = new javax.swing.GroupLayout(invoiceInforPanel);
        invoiceInforPanel.setLayout(invoiceInforPanelLayout);
        invoiceInforPanelLayout.setHorizontalGroup(
            invoiceInforPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(invoiceInforPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(orderIDLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(orderIDTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 140, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 290, Short.MAX_VALUE)
                .addComponent(dateLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(dateTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 11, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(30, 30, 30)
                .addComponent(timeLabel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(timeTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 114, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(2, 2, 2))
        );
        invoiceInforPanelLayout.setVerticalGroup(
            invoiceInforPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, invoiceInforPanelLayout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addGroup(invoiceInforPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(invoiceInforPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(dateTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(dateLabel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(invoiceInforPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, invoiceInforPanelLayout.createSequentialGroup()
                            .addComponent(orderIDLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 23, Short.MAX_VALUE)
                            .addGap(8, 8, 8))
                        .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(3, 3, 3))
            .addGroup(invoiceInforPanelLayout.createSequentialGroup()
                .addGroup(invoiceInforPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(invoiceInforPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(timeTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(timeLabel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(orderIDTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(0, 0, Short.MAX_VALUE))
        );

        add(invoiceInforPanel, java.awt.BorderLayout.PAGE_START);

        invoiceDetailPanel.setPreferredSize(new java.awt.Dimension(965, 600));
        invoiceDetailPanel.setLayout(new java.awt.BorderLayout());

        aboutGoodsAndCusPanel.setPreferredSize(new java.awt.Dimension(968, 180));
        aboutGoodsAndCusPanel.setLayout(new java.awt.BorderLayout(5, 0));

        employeeAndCustomerPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Khách hàng & Nhân viên", javax.swing.border.TitledBorder.CENTER, javax.swing.border.TitledBorder.DEFAULT_POSITION));
        employeeAndCustomerPanel.setAutoscrolls(true);
        employeeAndCustomerPanel.setDoubleBuffered(false);
        employeeAndCustomerPanel.setEnabled(false);
        employeeAndCustomerPanel.setFocusable(false);
        employeeAndCustomerPanel.setMaximumSize(new java.awt.Dimension(260, 190));
        employeeAndCustomerPanel.setOpaque(false);
        employeeAndCustomerPanel.setPreferredSize(new java.awt.Dimension(253, 209));
        employeeAndCustomerPanel.setRequestFocusEnabled(false);
        employeeAndCustomerPanel.setVerifyInputWhenFocusTarget(false);

        cashierPhoneNumLabel.setBackground(new java.awt.Color(255, 255, 255));
        cashierPhoneNumLabel.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        cashierPhoneNumLabel.setText("Thu Ngân-SĐT: ");

        cashierPhoneNumText.setEditable(false);
        cashierPhoneNumText.setBackground(new java.awt.Color(255, 255, 255));
        cashierPhoneNumText.setHorizontalAlignment(javax.swing.JTextField.CENTER);

        customerIDLabel.setBackground(new java.awt.Color(204, 204, 204));
        customerIDLabel.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        customerIDLabel.setText("MÃ KHÁCH HÀNG: ");

        employeeListComboBox.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "none" }));
        employeeListComboBox.setPreferredSize(new java.awt.Dimension(64, 22));
        employeeListComboBox.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                employeeListComboBoxItemStateChanged(evt);
            }
        });

        customerPointLabel.setText("Điểm hiện tại:");

        customerPointCheckTextField.setEditable(false);
        customerPointCheckTextField.setBackground(new java.awt.Color(255, 255, 255));
        customerPointCheckTextField.setFont(new java.awt.Font("Segoe UI", 2, 12)); // NOI18N
        customerPointCheckTextField.setForeground(new java.awt.Color(255, 0, 51));
        customerPointCheckTextField.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        customerPointCheckTextField.setBorder(null);
        customerPointCheckTextField.setMaximumSize(new java.awt.Dimension(80, 80));
        customerPointCheckTextField.setMinimumSize(new java.awt.Dimension(0, 0));

        employeeRoleLabel.setFont(new java.awt.Font("Segoe UI", 2, 12)); // NOI18N
        employeeRoleLabel.setText("(Tại quầy)");

        checkCustomerIDBtn.setText("Kiểm tra");
        checkCustomerIDBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                checkCustomerIDBtnActionPerformed(evt);
            }
        });

        customerIDText.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        customerIDText.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                customerIDTextMouseClicked(evt);
            }
        });
        customerIDText.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                customerIDTextKeyPressed(evt);
            }
        });

        javax.swing.GroupLayout employeeAndCustomerPanelLayout = new javax.swing.GroupLayout(employeeAndCustomerPanel);
        employeeAndCustomerPanel.setLayout(employeeAndCustomerPanelLayout);
        employeeAndCustomerPanelLayout.setHorizontalGroup(
            employeeAndCustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(employeeAndCustomerPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(employeeAndCustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, employeeAndCustomerPanelLayout.createSequentialGroup()
                        .addGap(1, 1, 1)
                        .addComponent(employeeRoleLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 61, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(employeeListComboBox, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(employeeAndCustomerPanelLayout.createSequentialGroup()
                        .addComponent(cashierPhoneNumLabel)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(cashierPhoneNumText))
                    .addGroup(employeeAndCustomerPanelLayout.createSequentialGroup()
                        .addGroup(employeeAndCustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(customerIDLabel)
                            .addGroup(employeeAndCustomerPanelLayout.createSequentialGroup()
                                .addGap(11, 11, 11)
                                .addComponent(customerPointLabel)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(employeeAndCustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(customerPointCheckTextField, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(customerIDText, javax.swing.GroupLayout.DEFAULT_SIZE, 103, Short.MAX_VALUE))))
                .addGap(18, 18, 18))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, employeeAndCustomerPanelLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(checkCustomerIDBtn)
                .addGap(31, 31, 31))
        );
        employeeAndCustomerPanelLayout.setVerticalGroup(
            employeeAndCustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(employeeAndCustomerPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(employeeAndCustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(customerIDLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(customerIDText, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(checkCustomerIDBtn)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(employeeAndCustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(customerPointCheckTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(customerPointLabel))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 20, Short.MAX_VALUE)
                .addGroup(employeeAndCustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(cashierPhoneNumLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(cashierPhoneNumText, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(employeeAndCustomerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(employeeListComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(employeeRoleLabel))
                .addContainerGap())
        );

        aboutGoodsAndCusPanel.add(employeeAndCustomerPanel, java.awt.BorderLayout.LINE_START);

        goodsPanel.setBorder(javax.swing.BorderFactory.createTitledBorder("Thông tin sản phẩm"));
        goodsPanel.setMaximumSize(new java.awt.Dimension(800, 190));
        goodsPanel.setMinimumSize(new java.awt.Dimension(700, 180));
        goodsPanel.setOpaque(false);

        goodsListTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Mã SP", "Tên SP", "Nhà SX", "ĐV", "Giá Bán/ĐV", "Mã lô", "Ngày SX", "Hạn SD", "SL"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        goodsListTable.setAutoResizeMode(javax.swing.JTable.AUTO_RESIZE_ALL_COLUMNS);
        goodsListTable.setFocusable(false);
        goodsListTable.setMaximumSize(new java.awt.Dimension(700, 0));
        goodsListTable.setMinimumSize(new java.awt.Dimension(675, 0));
        goodsListTable.setOpaque(false);
        goodsListTable.setShowGrid(true);
        goodsListTable.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                goodsListTableMouseClicked(evt);
            }
        });
        goodListScrollPane.setViewportView(goodsListTable);
        goodsListTable.getAccessibleContext().setAccessibleName("");

        javax.swing.GroupLayout goodsPanelLayout = new javax.swing.GroupLayout(goodsPanel);
        goodsPanel.setLayout(goodsPanelLayout);
        goodsPanelLayout.setHorizontalGroup(
            goodsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(goodsPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(goodListScrollPane, javax.swing.GroupLayout.DEFAULT_SIZE, 698, Short.MAX_VALUE)
                .addContainerGap())
        );
        goodsPanelLayout.setVerticalGroup(
            goodsPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(goodsPanelLayout.createSequentialGroup()
                .addComponent(goodListScrollPane, javax.swing.GroupLayout.DEFAULT_SIZE, 151, Short.MAX_VALUE)
                .addContainerGap())
        );

        aboutGoodsAndCusPanel.add(goodsPanel, java.awt.BorderLayout.CENTER);

        invoiceDetailPanel.add(aboutGoodsAndCusPanel, java.awt.BorderLayout.PAGE_START);

        aboutOrderPanel.setLayout(new java.awt.BorderLayout());

        feePanel.setBorder(javax.swing.BorderFactory.createTitledBorder("Thông tin hóa đơn"));
        feePanel.setLayout(new java.awt.BorderLayout(0, 10));

        subFeePanel.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        subFeePanel.setAutoscrolls(true);
        subFeePanel.setFocusable(false);
        subFeePanel.setMaximumSize(new java.awt.Dimension(32767, 170));
        subFeePanel.setOpaque(false);
        subFeePanel.setPreferredSize(new java.awt.Dimension(316, 170));

        shippingFeeLabel.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        shippingFeeLabel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/ImageIcon/icons8-shipping-25.png"))); // NOI18N
        shippingFeeLabel.setText("Phí vận chuyển:");

        customerMoneyLabel.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        customerMoneyLabel.setText("Tiền mặt khách:");

        discountLabel.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        discountLabel.setText("Chiết khấu(%): ");

        shippingFeeText.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        shippingFeeText.setMaximumSize(new java.awt.Dimension(2147483647, 20));
        shippingFeeText.setMinimumSize(new java.awt.Dimension(64, 20));
        shippingFeeText.setNextFocusableComponent(customerMoneyText);
        shippingFeeText.setPreferredSize(new java.awt.Dimension(64, 20));
        shippingFeeText.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                shippingFeeTextMouseClicked(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                shippingFeeTextMouseExited(evt);
            }
        });
        shippingFeeText.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                shippingFeeTextKeyPressed(evt);
            }
        });

        customerMoneyText.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        customerMoneyText.setMaximumSize(new java.awt.Dimension(2147483647, 20));
        customerMoneyText.setMinimumSize(new java.awt.Dimension(64, 20));
        customerMoneyText.setPreferredSize(new java.awt.Dimension(64, 20));
        customerMoneyText.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                customerMoneyTextMouseClicked(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                customerMoneyTextMouseExited(evt);
            }
        });
        customerMoneyText.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                customerMoneyTextKeyPressed(evt);
            }
        });

        discountText.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        discountText.setMaximumSize(new java.awt.Dimension(2147483647, 20));
        discountText.setPreferredSize(new java.awt.Dimension(64, 20));
        discountText.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                discountTextMouseClicked(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                discountTextMouseExited(evt);
            }
        });
        discountText.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                discountTextKeyPressed(evt);
            }
        });

        pointDiscountLabel.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        pointDiscountLabel.setText("Dùng điểm tích lũy:");

        pointDiscountText.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        pointDiscountText.setPreferredSize(new java.awt.Dimension(64, 20));
        pointDiscountText.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                pointDiscountTextMouseClicked(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                pointDiscountTextMouseExited(evt);
            }
        });
        pointDiscountText.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                pointDiscountTextKeyPressed(evt);
            }
        });

        paymentOptionLabel.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        paymentOptionLabel.setText("Phương thức thanh toán:");

        paymentOptionCombobox.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Tiền Mặt", "Chuyển Khoản", "Thẻ Ngân Hàng" }));
        paymentOptionCombobox.setMaximumSize(new java.awt.Dimension(32767, 20));
        paymentOptionCombobox.setMinimumSize(new java.awt.Dimension(72, 20));
        paymentOptionCombobox.setPreferredSize(new java.awt.Dimension(72, 20));
        paymentOptionCombobox.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                paymentOptionComboboxItemStateChanged(evt);
            }
        });

        taxLabel.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        taxLabel.setText("Thuế(VAT-%):");

        taxText.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        taxText.setMaximumSize(new java.awt.Dimension(2147483647, 20));
        taxText.setMinimumSize(new java.awt.Dimension(64, 20));
        taxText.setPreferredSize(new java.awt.Dimension(64, 20));
        taxText.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                taxTextMouseClicked(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                taxTextMouseExited(evt);
            }
        });
        taxText.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                taxTextKeyPressed(evt);
            }
        });

        javax.swing.GroupLayout subFeePanelLayout = new javax.swing.GroupLayout(subFeePanel);
        subFeePanel.setLayout(subFeePanelLayout);
        subFeePanelLayout.setHorizontalGroup(
            subFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(subFeePanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(subFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(subFeePanelLayout.createSequentialGroup()
                        .addGroup(subFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(discountLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 91, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(pointDiscountLabel))
                        .addGap(73, 73, 73)
                        .addGroup(subFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(discountText, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(pointDiscountText, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(subFeePanelLayout.createSequentialGroup()
                        .addComponent(paymentOptionLabel)
                        .addGap(41, 41, 41)
                        .addComponent(paymentOptionCombobox, 0, 116, Short.MAX_VALUE))
                    .addGroup(subFeePanelLayout.createSequentialGroup()
                        .addComponent(customerMoneyLabel)
                        .addGap(93, 93, 93)
                        .addComponent(customerMoneyText, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(subFeePanelLayout.createSequentialGroup()
                        .addGroup(subFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(shippingFeeLabel)
                            .addComponent(taxLabel))
                        .addGap(66, 66, 66)
                        .addGroup(subFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(taxText, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(shippingFeeText, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                .addContainerGap())
        );
        subFeePanelLayout.setVerticalGroup(
            subFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(subFeePanelLayout.createSequentialGroup()
                .addGap(6, 6, 6)
                .addGroup(subFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(paymentOptionLabel)
                    .addComponent(paymentOptionCombobox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(subFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(taxText, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(taxLabel))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(subFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(shippingFeeLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(shippingFeeText, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(subFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(customerMoneyText, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(customerMoneyLabel))
                .addGap(6, 6, 6)
                .addGroup(subFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(discountLabel)
                    .addComponent(discountText, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(subFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(pointDiscountText, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(pointDiscountLabel))
                .addContainerGap())
        );

        feePanel.add(subFeePanel, java.awt.BorderLayout.PAGE_START);

        mainFeePanel.setBackground(new java.awt.Color(255, 255, 255));
        mainFeePanel.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED, new java.awt.Color(153, 153, 153), new java.awt.Color(51, 51, 51), new java.awt.Color(153, 153, 153), new java.awt.Color(51, 51, 51)));
        mainFeePanel.setEnabled(false);
        mainFeePanel.setFocusable(false);
        mainFeePanel.setOpaque(false);

        subTotalLabel.setFont(new java.awt.Font("MTO Telephone", 1, 14)); // NOI18N
        subTotalLabel.setText("THÀNH TIỀN:");

        discountAmountLabel.setFont(new java.awt.Font("MTO Telephone", 1, 14)); // NOI18N
        discountAmountLabel.setText("KHOẢN CHIẾT KHẤU TAY:");

        taxAmountLabel.setFont(new java.awt.Font("MTO Telephone", 1, 14)); // NOI18N
        taxAmountLabel.setText("KHOẢN THUẾ:");

        pointDiscountAmountLabel.setFont(new java.awt.Font("MTO Telephone", 1, 14)); // NOI18N
        pointDiscountAmountLabel.setText("KHOẢN CHIẾT KHẤU ĐIỂM:");

        totalLabel.setFont(new java.awt.Font("MTO Telephone", 1, 14)); // NOI18N
        totalLabel.setText("TỔNG THANH TOÁN:");

        changeAmountLabel.setFont(new java.awt.Font("MTO Telephone", 1, 14)); // NOI18N
        changeAmountLabel.setText("TIỀN THỪA KHÁCH: ");

        subTotalTextField.setEditable(false);
        subTotalTextField.setBackground(new java.awt.Color(255, 255, 255));
        subTotalTextField.setFont(new java.awt.Font("MTO Telephone", 1, 14)); // NOI18N
        subTotalTextField.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        subTotalTextField.setText("0.0");
        subTotalTextField.setBorder(null);
        subTotalTextField.setMaximumSize(new java.awt.Dimension(2147483647, 20));
        subTotalTextField.setMinimumSize(new java.awt.Dimension(64, 20));
        subTotalTextField.setPreferredSize(new java.awt.Dimension(64, 20));

        taxAmountTextField.setFont(new java.awt.Font("MTO Telephone", 1, 14)); // NOI18N
        taxAmountTextField.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        taxAmountTextField.setText("0.0");
        taxAmountTextField.setBorder(null);
        taxAmountTextField.setMaximumSize(new java.awt.Dimension(2147483647, 20));
        taxAmountTextField.setMinimumSize(new java.awt.Dimension(64, 20));
        taxAmountTextField.setPreferredSize(new java.awt.Dimension(64, 20));

        discountAmountTextField.setEditable(false);
        discountAmountTextField.setBackground(new java.awt.Color(255, 255, 255));
        discountAmountTextField.setFont(new java.awt.Font("MTO Telephone", 1, 14)); // NOI18N
        discountAmountTextField.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        discountAmountTextField.setText("0.0");
        discountAmountTextField.setBorder(null);
        discountAmountTextField.setMaximumSize(new java.awt.Dimension(2147483647, 20));
        discountAmountTextField.setMinimumSize(new java.awt.Dimension(64, 20));
        discountAmountTextField.setPreferredSize(new java.awt.Dimension(64, 20));

        pointDiscountAmountTextField.setEditable(false);
        pointDiscountAmountTextField.setBackground(new java.awt.Color(255, 255, 255));
        pointDiscountAmountTextField.setFont(new java.awt.Font("MTO Telephone", 1, 14)); // NOI18N
        pointDiscountAmountTextField.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        pointDiscountAmountTextField.setText("0.0");
        pointDiscountAmountTextField.setBorder(null);
        pointDiscountAmountTextField.setMaximumSize(new java.awt.Dimension(64, 20));
        pointDiscountAmountTextField.setMinimumSize(new java.awt.Dimension(64, 20));
        pointDiscountAmountTextField.setName(""); // NOI18N
        pointDiscountAmountTextField.setPreferredSize(new java.awt.Dimension(64, 20));

        totalTextField.setEditable(false);
        totalTextField.setBackground(new java.awt.Color(255, 255, 255));
        totalTextField.setFont(new java.awt.Font("MTO Telephone", 1, 14)); // NOI18N
        totalTextField.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        totalTextField.setText("0.0");
        totalTextField.setBorder(null);
        totalTextField.setMaximumSize(new java.awt.Dimension(2147483647, 20));
        totalTextField.setMinimumSize(new java.awt.Dimension(64, 20));
        totalTextField.setPreferredSize(new java.awt.Dimension(64, 20));

        changeAmountTextField.setEditable(false);
        changeAmountTextField.setBackground(new java.awt.Color(255, 255, 255));
        changeAmountTextField.setFont(new java.awt.Font("MTO Telephone", 1, 14)); // NOI18N
        changeAmountTextField.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        changeAmountTextField.setText("0.0");
        changeAmountTextField.setActionCommand("<Not Set>");
        changeAmountTextField.setBorder(null);
        changeAmountTextField.setMaximumSize(new java.awt.Dimension(2147483647, 20));
        changeAmountTextField.setMinimumSize(new java.awt.Dimension(64, 20));
        changeAmountTextField.setPreferredSize(new java.awt.Dimension(64, 20));

        payAnfPrintBtn.setBackground(new java.awt.Color(204, 204, 204));
        payAnfPrintBtn.setFont(new java.awt.Font("MTO Telephone", 1, 14)); // NOI18N
        payAnfPrintBtn.setText("THANH TOÁN & IN ");
        payAnfPrintBtn.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED, new java.awt.Color(102, 102, 102), new java.awt.Color(51, 51, 51), new java.awt.Color(102, 102, 102), new java.awt.Color(51, 51, 51)));
        payAnfPrintBtn.setFocusable(false);
        payAnfPrintBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                payAnfPrintBtnActionPerformed(evt);
            }
        });

        payBtn.setBackground(new java.awt.Color(204, 204, 204));
        payBtn.setFont(new java.awt.Font("MTO Telephone", 1, 14)); // NOI18N
        payBtn.setText("THANH TOÁN ");
        payBtn.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED, new java.awt.Color(102, 102, 102), new java.awt.Color(51, 51, 51), new java.awt.Color(102, 102, 102), new java.awt.Color(51, 51, 51)));
        payBtn.setFocusable(false);
        payBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                payBtnActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout mainFeePanelLayout = new javax.swing.GroupLayout(mainFeePanel);
        mainFeePanel.setLayout(mainFeePanelLayout);
        mainFeePanelLayout.setHorizontalGroup(
            mainFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(mainFeePanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(mainFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(mainFeePanelLayout.createSequentialGroup()
                        .addGroup(mainFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(totalLabel)
                            .addComponent(changeAmountLabel))
                        .addGap(65, 65, 65)
                        .addGroup(mainFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(totalTextField, javax.swing.GroupLayout.DEFAULT_SIZE, 96, Short.MAX_VALUE)
                            .addComponent(changeAmountTextField, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(mainFeePanelLayout.createSequentialGroup()
                        .addGap(26, 26, 26)
                        .addComponent(payAnfPrintBtn)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(payBtn))
                    .addGroup(mainFeePanelLayout.createSequentialGroup()
                        .addGroup(mainFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(pointDiscountAmountLabel)
                            .addComponent(discountAmountLabel)
                            .addComponent(taxAmountLabel)
                            .addComponent(subTotalLabel))
                        .addGap(15, 15, 15)
                        .addGroup(mainFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(subTotalTextField, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(taxAmountTextField, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(discountAmountTextField, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(pointDiscountAmountTextField, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                .addContainerGap())
        );
        mainFeePanelLayout.setVerticalGroup(
            mainFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(mainFeePanelLayout.createSequentialGroup()
                .addGap(2, 2, 2)
                .addGroup(mainFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(subTotalTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(subTotalLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(5, 5, 5)
                .addGroup(mainFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(taxAmountTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(taxAmountLabel))
                .addGap(5, 5, 5)
                .addGroup(mainFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(discountAmountLabel)
                    .addComponent(discountAmountTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(5, 5, 5)
                .addGroup(mainFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(pointDiscountAmountLabel)
                    .addComponent(pointDiscountAmountTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(5, 5, 5)
                .addGroup(mainFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(totalLabel)
                    .addComponent(totalTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(5, 5, 5)
                .addGroup(mainFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(changeAmountLabel)
                    .addComponent(changeAmountTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(5, 5, 5)
                .addGroup(mainFeePanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(payAnfPrintBtn)
                    .addComponent(payBtn))
                .addGap(3, 3, 3))
        );

        feePanel.add(mainFeePanel, java.awt.BorderLayout.CENTER);

        aboutOrderPanel.add(feePanel, java.awt.BorderLayout.LINE_END);

        orderDisplayPanel.setBorder(javax.swing.BorderFactory.createTitledBorder("Bộ lọc & Tìm kiếm"));
        orderDisplayPanel.setLayout(new java.awt.BorderLayout(0, 10));

        mainOrderFunctionPanel.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED, new java.awt.Color(102, 102, 102), new java.awt.Color(51, 51, 51), new java.awt.Color(102, 102, 102), new java.awt.Color(51, 51, 51)));
        mainOrderFunctionPanel.setEnabled(false);
        mainOrderFunctionPanel.setFocusable(false);
        mainOrderFunctionPanel.setMaximumSize(new java.awt.Dimension(630, 170));
        mainOrderFunctionPanel.setOpaque(false);
        mainOrderFunctionPanel.setPreferredSize(new java.awt.Dimension(629, 170));

        quantityTextField.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        quantityTextField.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        quantityTextField.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                quantityTextFieldMouseClicked(evt);
            }
        });
        quantityTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                quantityTextFieldKeyPressed(evt);
            }
        });

        quantityLabel.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        quantityLabel.setText("Nhập Số Lượng:");

        goodsIDTextField.setEditable(false);
        goodsIDTextField.setBackground(new java.awt.Color(255, 255, 255));
        goodsIDTextField.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        goodsIDTextField.setHorizontalAlignment(javax.swing.JTextField.CENTER);

        addBtn.setBackground(new java.awt.Color(0, 255, 102));
        addBtn.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        addBtn.setForeground(new java.awt.Color(255, 255, 255));
        addBtn.setText("Thêm");
        addBtn.setMinimumSize(new java.awt.Dimension(84, 27));
        addBtn.setPreferredSize(new java.awt.Dimension(84, 27));
        addBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                addBtnActionPerformed(evt);
            }
        });

        removeBtn.setBackground(new java.awt.Color(255, 0, 0));
        removeBtn.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        removeBtn.setForeground(new java.awt.Color(255, 255, 255));
        removeBtn.setText("Xóa");
        removeBtn.setPreferredSize(new java.awt.Dimension(84, 27));
        removeBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                removeBtnActionPerformed(evt);
            }
        });

        resetOrderGoodsList.setBackground(new java.awt.Color(51, 51, 51));
        resetOrderGoodsList.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        resetOrderGoodsList.setForeground(new java.awt.Color(255, 255, 255));
        resetOrderGoodsList.setText("Làm mới");
        resetOrderGoodsList.setOpaque(true);
        resetOrderGoodsList.setPreferredSize(new java.awt.Dimension(72, 27));
        resetOrderGoodsList.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                resetOrderGoodsListActionPerformed(evt);
            }
        });

        editBtn.setBackground(new java.awt.Color(0, 255, 102));
        editBtn.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        editBtn.setForeground(new java.awt.Color(255, 255, 255));
        editBtn.setText("Sửa");
        editBtn.setPreferredSize(new java.awt.Dimension(7284, 27));
        editBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                editBtnActionPerformed(evt);
            }
        });

        unitLabel.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        unitLabel.setText("Đơn Vị:");

        shipmentIDLabel.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        shipmentIDLabel.setText("Mã Lô:");

        fromLabel.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        fromLabel.setText("Từ:");

        toLabel.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        toLabel.setText("Đến:");

        unitComboBox.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        unitComboBox.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "none" }));
        unitComboBox.setDoubleBuffered(true);
        unitComboBox.setFocusCycleRoot(true);
        unitComboBox.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                unitComboBoxItemStateChanged(evt);
            }
        });

        goodsIDLabel.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        goodsIDLabel.setText("Mã SP:");

        shipmentIDTextField.setEditable(false);
        shipmentIDTextField.setBackground(new java.awt.Color(255, 255, 255));
        shipmentIDTextField.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        shipmentIDTextField.setHorizontalAlignment(javax.swing.JTextField.CENTER);

        priceRangeComboBox.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        priceRangeComboBox.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "none" }));
        priceRangeComboBox.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                priceRangeComboBoxItemStateChanged(evt);
            }
        });

        priceRangeLabel.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        priceRangeLabel.setText("Khoảng Giá:");

        keyWordLabel.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        keyWordLabel.setText("Nhập từ khóa tìm kiếm : ");
        keyWordLabel.setAutoscrolls(true);
        keyWordLabel.setVerifyInputWhenFocusTarget(false);

        jSeparator2.setOrientation(javax.swing.SwingConstants.VERTICAL);

        proAndExpirDateBtnGroup.add(productionDateRadioBtn);
        productionDateRadioBtn.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        productionDateRadioBtn.setText("Ngày SX");
        productionDateRadioBtn.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                productionDateRadioBtnItemStateChanged(evt);
            }
        });

        keyWordTextField.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        keyWordTextField.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        keyWordTextField.setOpaque(true);
        keyWordTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                keyWordTextFieldKeyPressed(evt);
            }
        });

        searchBtn.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        searchBtn.setText("Tra");
        searchBtn.setMaximumSize(new java.awt.Dimension(90, 27));
        searchBtn.setMinimumSize(new java.awt.Dimension(85, 15));
        searchBtn.setOpaque(true);
        searchBtn.setPreferredSize(new java.awt.Dimension(88, 22));
        searchBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                searchBtnActionPerformed(evt);
            }
        });

        proAndExpirDateBtnGroup.add(expirDateRadioBtn);
        expirDateRadioBtn.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        expirDateRadioBtn.setText("Hạn SD  ");
        expirDateRadioBtn.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                expirDateRadioBtnItemStateChanged(evt);
            }
        });

        jSeparator3.setOrientation(javax.swing.SwingConstants.VERTICAL);

        keyWarningLabel.setFont(new java.awt.Font("Segoe UI", 2, 12)); // NOI18N
        keyWarningLabel.setForeground(new java.awt.Color(255, 0, 51));
        keyWarningLabel.setText("Warning!");
        keyWarningLabel.setDebugGraphicsOptions(javax.swing.DebugGraphics.NONE_OPTION);
        keyWarningLabel.setFocusable(false);
        keyWarningLabel.setPreferredSize(new java.awt.Dimension(33, 16));

        fromDateTextField.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        fromDateTextField.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        fromDateTextField.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                fromDateTextFieldMouseClicked(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                fromDateTextFieldMouseExited(evt);
            }
        });
        fromDateTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                fromDateTextFieldKeyPressed(evt);
            }
        });

        toDateTextField.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        toDateTextField.setPreferredSize(new java.awt.Dimension(64, 26));
        toDateTextField.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                toDateTextFieldMouseClicked(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                toDateTextFieldMouseExited(evt);
            }
        });
        toDateTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                toDateTextFieldKeyPressed(evt);
            }
        });

        filterBtn.setBackground(new java.awt.Color(0, 255, 0));
        filterBtn.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        filterBtn.setForeground(new java.awt.Color(255, 255, 255));
        filterBtn.setText("Lọc");
        filterBtn.setPreferredSize(new java.awt.Dimension(104, 27));
        filterBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                filterBtnActionPerformed(evt);
            }
        });

        filterSwitchRadioBtn.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        filterSwitchRadioBtn.setText("Bật Bộ Lọc");
        filterSwitchRadioBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                filterSwitchRadioBtnActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout mainOrderFunctionPanelLayout = new javax.swing.GroupLayout(mainOrderFunctionPanel);
        mainOrderFunctionPanel.setLayout(mainOrderFunctionPanelLayout);
        mainOrderFunctionPanelLayout.setHorizontalGroup(
            mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                        .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(unitLabel)
                            .addComponent(priceRangeLabel))
                        .addGap(18, 18, 18)
                        .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(priceRangeComboBox, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(unitComboBox, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                        .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                                .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                                        .addComponent(productionDateRadioBtn)
                                        .addGap(8, 8, 8))
                                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, mainOrderFunctionPanelLayout.createSequentialGroup()
                                        .addComponent(expirDateRadioBtn)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)))
                                .addComponent(jSeparator3, javax.swing.GroupLayout.PREFERRED_SIZE, 3, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(fromLabel)
                                    .addComponent(toLabel)))
                            .addComponent(filterSwitchRadioBtn))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(filterBtn, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(fromDateTextField)
                            .addComponent(toDateTextField, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jSeparator2, javax.swing.GroupLayout.PREFERRED_SIZE, 7, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, 0)
                .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                        .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(quantityLabel)
                            .addComponent(quantityTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 120, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(addBtn, javax.swing.GroupLayout.PREFERRED_SIZE, 85, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(editBtn, javax.swing.GroupLayout.PREFERRED_SIZE, 85, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(12, 12, 12)
                        .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(resetOrderGoodsList, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(removeBtn, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, mainOrderFunctionPanelLayout.createSequentialGroup()
                        .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                                .addGap(0, 0, Short.MAX_VALUE)
                                .addComponent(keyWarningLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 182, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addComponent(goodsIDLabel))
                            .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                                .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                                        .addComponent(keyWordLabel)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 52, Short.MAX_VALUE))
                                    .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                                        .addComponent(keyWordTextField)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(searchBtn, javax.swing.GroupLayout.PREFERRED_SIZE, 65, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addGap(6, 6, 6)))
                                .addComponent(shipmentIDLabel)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(shipmentIDTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 98, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(goodsIDTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 98, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addContainerGap())
        );
        mainOrderFunctionPanelLayout.setVerticalGroup(
            mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                .addGap(8, 8, 8)
                .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(priceRangeLabel)
                    .addComponent(priceRangeComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, 26, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(5, 5, 5)
                .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(unitComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(unitLabel))
                .addGap(5, 5, 5)
                .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                        .addComponent(productionDateRadioBtn)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(expirDateRadioBtn, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jSeparator3, javax.swing.GroupLayout.PREFERRED_SIZE, 59, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                        .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(fromDateTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(fromLabel))
                        .addGap(5, 5, 5)
                        .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(toDateTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(toLabel))))
                .addGap(3, 3, 3)
                .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(filterBtn, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(filterSwitchRadioBtn))
                .addContainerGap(7, Short.MAX_VALUE))
            .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(goodsIDLabel)
                            .addComponent(goodsIDTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, mainOrderFunctionPanelLayout.createSequentialGroup()
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(keyWarningLabel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)))
                .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                        .addGap(15, 15, 15)
                        .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(shipmentIDTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(shipmentIDLabel))
                        .addGap(12, 12, 12)
                        .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(removeBtn, javax.swing.GroupLayout.PREFERRED_SIZE, 27, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(addBtn, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(quantityLabel))))
                    .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                        .addComponent(keyWordLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 14, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(keyWordTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(mainOrderFunctionPanelLayout.createSequentialGroup()
                                .addComponent(searchBtn, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addGap(1, 1, 1)))))
                .addGap(6, 6, 6)
                .addGroup(mainOrderFunctionPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(resetOrderGoodsList, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(editBtn, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(quantityTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(15, 15, 15))
            .addComponent(jSeparator2)
        );

        orderDisplayPanel.add(mainOrderFunctionPanel, java.awt.BorderLayout.PAGE_START);

        orderGoodsListScrollPane.setPreferredSize(new java.awt.Dimension(452, 216));

        orderGoodsListTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Mã SP", "Tên SP", "Tổng SL", "ĐV", "Giá Bán/ĐV", "Mã Lô", "SL"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        orderGoodsListTable.setAutoResizeMode(javax.swing.JTable.AUTO_RESIZE_ALL_COLUMNS);
        orderGoodsListTable.setFocusable(false);
        orderGoodsListTable.setMaximumSize(new java.awt.Dimension(2147483647, 216));
        orderGoodsListTable.setOpaque(false);
        orderGoodsListTable.setPreferredSize(new java.awt.Dimension(525, 216));
        orderGoodsListTable.setShowGrid(true);
        orderGoodsListTable.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                orderGoodsListTableMouseClicked(evt);
            }
        });
        orderGoodsListScrollPane.setViewportView(orderGoodsListTable);

        orderDisplayPanel.add(orderGoodsListScrollPane, java.awt.BorderLayout.CENTER);

        aboutOrderPanel.add(orderDisplayPanel, java.awt.BorderLayout.CENTER);

        invoiceDetailPanel.add(aboutOrderPanel, java.awt.BorderLayout.CENTER);

        add(invoiceDetailPanel, java.awt.BorderLayout.CENTER);
    }// </editor-fold>//GEN-END:initComponents

    private void payBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_payBtnActionPerformed
        keyWarningLabel.setVisible(false);
        // xét các điều kiện
        if (order.getList().isEmpty()) { // Kiểm tra xem đã chọn sản phẩm nào chưa
            insertWarningToLabel(keyWarningLabel, NOTHING_CHOOSEN_WARNING);
            return;
        } else if (employeeListComboBox.getSelectedIndex() == 0) { // kiểm tra xem đã chọn thu ngân chưa
            insertWarningToTextField(cashierPhoneNumText, NONE_SELECTED_CASHIER, 12);
            return;
        } else if (insufficientCustomerMoneyCheck(order.getCusMoney())) {
            return;
        }
        // thực hiện chức năng
        System.out.println(order.getPointDiscount());
        orderCtr.payOrderForGUI(order, shift, repository, settings.getStore());
        initNewOrder();
    }//GEN-LAST:event_payBtnActionPerformed

    private void payAnfPrintBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_payAnfPrintBtnActionPerformed
        keyWarningLabel.setVisible(false);
        // xét các điều kiện
        if (order.getList().isEmpty()) { // Kiểm tra xem đã chọn sản phẩm nào chưa
            insertWarningToLabel(keyWarningLabel, NOTHING_CHOOSEN_WARNING);
            return;
        } else if (employeeListComboBox.getSelectedIndex() == 0) { // kiểm tra xem đã chọn thu ngân chưa
            insertWarningToTextField(cashierPhoneNumText, NONE_SELECTED_CASHIER, 12);
            return;
        } else if (insufficientCustomerMoneyCheck(order.getCusMoney())) { //Kiểm tra xem có thiếu tiền kh
            return;
        }
        // thực hiện chức năng
        orderCtr.payOrderForGUI(order, shift, repository, settings.getStore());
        orderCtr.getOrderView().printBillToFile(order, settings.getStore(), orderCtr);
        initNewOrder();
    }//GEN-LAST:event_payAnfPrintBtnActionPerformed

    private void goodsListTableMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_goodsListTableMouseClicked
        keyWarningLabel.setVisible(false);
        int selectedRow = goodsListTable.getSelectedRow();
        if (selectedRow == -1) {
            return;
        }
        String shipmentID = (String) goodsListModel.getValueAt(selectedRow, 5);
        Goods goods = orderCtr.containGoodsForGUI(draftGoodsList, shipmentID);
        shipmentIDTextField.setText(shipmentID);
        keyWordTextField.setText(goods.getGoodsName());
        goodsIDTextField.setText(goods.getID());
        if (filterGoodsList != null) {
            goods = orderCtr.containGoodsForGUI(filterGoodsList, shipmentID);
        }
        GoodsList<Goods> bucket = new GoodsList<>();
        bucket.getList().add(goods);
        orderSelectedRow = -1;
        insertGoodsListToGoodsListTable(bucket);
    }//GEN-LAST:event_goodsListTableMouseClicked

    private void orderGoodsListTableMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_orderGoodsListTableMouseClicked
        int selectedRow = orderGoodsListTable.getSelectedRow();
        if (selectedRow == -1) {
            return;
        }
        String shipmentID = (String) orderGoodsListModel.getValueAt(selectedRow, 5);
        Goods selectedGoods = orderCtr.containGoodsForGUI(order, shipmentID);
        Goods goodsInDraftGoodsList = orderCtr.containGoods(draftGoodsList, selectedGoods.getID());
        Shipment selectedShipment = goodsCtr.containShipment(selectedGoods, shipmentID);
        shipmentIDTextField.setText(shipmentID);
        keyWordTextField.setText(selectedGoods.getGoodsName());
        goodsIDTextField.setText(selectedGoods.getID());
        quantityTextField.setText(selectedShipment.getQuantity() + "");
        orderSelectedRow = selectedRow;
        // hiển thị sản phẩm ở bảng order
        insertGoodsListToOrderGoodsListTable(order);
        // Hiển thị sản phẩm ở bảng goodsList
        GoodsList<Goods> bucket = new GoodsList<>();
        bucket.getList().add(goodsInDraftGoodsList);
        insertGoodsListToGoodsListTable(bucket);
        insertGoodsListToGoodsListTable(bucket);
    }//GEN-LAST:event_orderGoodsListTableMouseClicked

    private void checkCustomerIDBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_checkCustomerIDBtnActionPerformed
        CustomerCard customerCard = null;
        String customerID = customerIDText.getText();
        // Kiểm tra điều kiện
        if (customerID.isBlank()) { // Kiểm tra xem có trống hay không
            insertWarningToTextField(customerPointCheckTextField, EMPTY_TEXT_FIELD_WARNING, 12);
            customerIDWarningCheck = false;
            return;
        } else if (!ctions.checkIfANumberSequenceForGUI(customerID)) { // kiểm tra xem có phải là số hợp lệ không 
            insertWarningToTextField(customerPointCheckTextField, INVALID_WARNING, 12);
            customerIDWarningCheck = false;
            return;
        }
        // Thực hiện chức năng
        customerCard = customerCardListCtr.containCustomerCard(cutomerCardList, customerID);
        if (customerCard == null) { // kiểm tra xem thẻ có tồn tại hay không
            insertWarningToTextField(customerPointCheckTextField,
                    CUSTOMER_CARD_NOT_EXIST, 12);
            customerIDWarningCheck = false;
            pointDiscountText.setEditable(false);
        } else {
            customerIDText.setText(customerID);
            customerIDWarningCheck = true;
            customerPointCheckTextField.setText(customerCard.getPoint() + "");
            pointDiscountText.setEditable(true);
        }
        order.setCustomerCard(customerCard);
    }//GEN-LAST:event_checkCustomerIDBtnActionPerformed

    private void customerMoneyTextMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_customerMoneyTextMouseClicked
        if (!customerMoneyWarningCheck) {
            textFieldMouseClick(customerMoneyText, 12);
        }
    }//GEN-LAST:event_customerMoneyTextMouseClicked

    private void discountTextMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_discountTextMouseClicked
        if (!discountWarningCheck) {
            textFieldMouseClick(discountText, 12);
        }
    }//GEN-LAST:event_discountTextMouseClicked

    private void pointDiscountTextMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_pointDiscountTextMouseClicked
        if (!pointDiscountWarningCheck) {
            textFieldMouseClick(pointDiscountText, 12);
        }
        pointDiscountText.setEditable(customerIDWarningCheck);
    }//GEN-LAST:event_pointDiscountTextMouseClicked
    private void shippingFeeTextMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_shippingFeeTextMouseClicked
        if (!shippingFeeWarningCheck) {
            textFieldMouseClick(shippingFeeText, 12);
        }
    }//GEN-LAST:event_shippingFeeTextMouseClicked

    private void shippingFeeTextKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_shippingFeeTextKeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            String shippingFeeStr = shippingFeeText.getText();
            if (!ctions.checkIfAValidNumberForGUI(shippingFeeStr) && !shippingFeeStr.isBlank()) {// kiểm tra xem có phải số hợp lệ hay không
                insertWarningToTextField(shippingFeeText, INVALID_WARNING, 12);
                shippingFeeWarningCheck = false;
                return;
            }
            if (shippingFeeStr.isBlank()) {
                order.setShippingFee(BigDecimal.ZERO);
                return;
            }
            order.setShippingFee(new BigDecimal(shippingFeeStr));
            shippingFeeWarningCheck = true;
            if (ifCashPayment) {
                customerMoneyText.requestFocus();
            } else {
                discountText.requestFocus();
            }
            loadMainFee(order);
        }
    }//GEN-LAST:event_shippingFeeTextKeyPressed

    private void customerMoneyTextKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_customerMoneyTextKeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            String customerMoneyStr = customerMoneyText.getText();
            if (customerMoneyStr.isBlank()) { // kiểm tra xem textField có trống không
                insertWarningToTextField(customerMoneyText, EMPTY_TEXT_FIELD_WARNING, 12);
                customerMoneyWarningCheck = false;
                return;
            } else if (!ctions.checkIfAValidNumberForGUI(customerMoneyStr)) {// kiểm tra xem có phải số hợp lệ hay không
                insertWarningToTextField(customerMoneyText, INVALID_WARNING, 12);
                customerMoneyWarningCheck = false;
                return;
            }
            BigDecimal cusMoney = new BigDecimal(customerMoneyStr);
            if (insufficientCustomerMoneyCheck(cusMoney)) {
                return;
            }
            order.setCusMoney(new BigDecimal(customerMoneyStr));
            customerMoneyWarningCheck = true;
            discountText.requestFocus();
            loadMainFee(order);
        }
    }//GEN-LAST:event_customerMoneyTextKeyPressed

    private void employeeListComboBoxItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_employeeListComboBoxItemStateChanged
        setDefaultOptionToTextField(cashierPhoneNumText, 12);
        int selectedItem = employeeListComboBox.getSelectedIndex();
        if (selectedItem == 0) {
            insertWarningToTextField(customerPointCheckTextField, NONE_SELECTED_CASHIER, 12);
        } else {
            order.setCashier(employeeList.getList().get(selectedItem - 1));
            cashierPhoneNumText.setText(employeeListComboBox.getSelectedItem().toString());
        }
    }//GEN-LAST:event_employeeListComboBoxItemStateChanged

    private void discountTextKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_discountTextKeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            String discountStr = discountText.getText();
            if (!ctions.checkIfAValidNumberForGUI(discountStr) && !discountStr.isBlank()) {// kiểm tra xem có phải số hợp lệ hay không
                discountWarningCheck = false;
                insertWarningToTextField(discountText, INVALID_WARNING, 12);
                return;
            }
            if (discountStr.isBlank()) {
                order.setDiscount(0);
                return;
            }
            order.setDiscount(Math.min(100, Integer.parseInt(discountStr)));
            discountWarningCheck = true;
            if (customerIDWarningCheck) {
                pointDiscountText.requestFocus();
            }
            loadMainFee(order);
        }
    }//GEN-LAST:event_discountTextKeyPressed

    private void pointDiscountTextKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_pointDiscountTextKeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            String pointDiscountStr = pointDiscountText.getText();
            if (!ctions.checkIfANumberSequenceForGUI(pointDiscountStr) && !pointDiscountStr.isBlank()) {// kiểm tra xem có phải số hợp lệ hay không
                insertWarningToTextField(pointDiscountText, INVALID_WARNING, 12);
                pointDiscountWarningCheck = false;
                return;
            }
            if (pointDiscountStr.isBlank()) {
                order.setPointDiscount(BigInteger.ZERO);
                return;
            }
            pointDiscountWarningCheck = true;
            BigInteger usedPoint = new BigInteger(pointDiscountStr);
            BigInteger customerPoint = order.getCustomerCard().getPoint();
            order.setPointDiscount(usedPoint.compareTo(customerPoint) >= 0 ? customerPoint : usedPoint);
            pointDiscountText.setText(order.getPointDiscount() + "");
            loadMainFee(order);
        }
    }//GEN-LAST:event_pointDiscountTextKeyPressed

    private void paymentOptionComboboxItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_paymentOptionComboboxItemStateChanged
        boolean editable = true;
        // nếu order là chuyển khoản hoặc thẻ thì không cho nhập customerMoney nữa
        if (paymentOptionCombobox.getSelectedIndex() != 0) {
            order.setPaymentOptions(PaymentOptions.OTHER_PAYMENT);
            ifCashPayment = false;
            editable = false;
        } else {
            ifCashPayment = true;
            order.setPaymentOptions(PaymentOptions.CASH_PAYMENT);
        }
        setDefaultOptionToTextField(customerMoneyText, 12);
        customerMoneyText.setEditable(editable);
        if (!taxBindWithShift) {
            taxText.requestFocus();
        }
        loadMainFee(order);
    }//GEN-LAST:event_paymentOptionComboboxItemStateChanged

    private void customerIDTextMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_customerIDTextMouseClicked
        if (!customerIDWarningCheck) {
            textFieldMouseClick(customerIDText, 12);
        }
    }//GEN-LAST:event_customerIDTextMouseClicked

    private void taxTextMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_taxTextMouseExited
        if (!taxBindWithShift) {
            String taxStr = taxText.getText();
            if (!ctions.checkIfAValidNumberForGUI(taxStr) && !taxStr.isBlank()) {// kiểm tra xem có phải số hợp lệ hay không
                insertWarningToTextField(taxText, INVALID_WARNING, 12);
                taxWarningCheck = false;
                return;
            }
            if (taxStr.isBlank()) {
                order.setTax(0);
                return;
            }
            order.setTax(Math.min(100, Integer.parseInt(taxStr)));
            taxWarningCheck = true;
            loadMainFee(order);
        }
    }//GEN-LAST:event_taxTextMouseExited

    private void taxTextKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_taxTextKeyPressed
        if (!taxBindWithShift) {
            if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
                String taxStr = taxText.getText();
                if (!ctions.checkIfAValidNumberForGUI(taxStr) && !taxStr.isBlank()) {// kiểm tra xem có phải số hợp lệ hay không
                    insertWarningToTextField(taxText, INVALID_WARNING, 12);
                    taxWarningCheck = false;
                    return;
                }
                if (taxStr.isBlank()) {
                    order.setTax(0);
                    return;
                }
                order.setTax(Math.min(100, Integer.parseInt(taxStr)));
                taxWarningCheck = true;
                shippingFeeText.requestFocus();
                loadMainFee(order);
            }
        }
    }//GEN-LAST:event_taxTextKeyPressed

    private void taxTextMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_taxTextMouseClicked
        if (!taxBindWithShift) {
            if (!taxWarningCheck) {
                textFieldMouseClick(taxText, 12);
            }
        }
    }//GEN-LAST:event_taxTextMouseClicked

    private void shippingFeeTextMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_shippingFeeTextMouseExited
        String shippingFeeStr = shippingFeeText.getText();
        if (!ctions.checkIfAValidNumberForGUI(shippingFeeStr) && !shippingFeeStr.isBlank()) {// kiểm tra xem có phải số hợp lệ hay không
            insertWarningToTextField(shippingFeeText, INVALID_WARNING, 12);
            shippingFeeWarningCheck = false;
            return;
        }
        if (shippingFeeStr.isBlank()) {
            order.setShippingFee(BigDecimal.ZERO);
            return;
        }
        order.setShippingFee(new BigDecimal(shippingFeeStr));
        shippingFeeWarningCheck = true;
        loadMainFee(order);
    }//GEN-LAST:event_shippingFeeTextMouseExited

    private void customerMoneyTextMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_customerMoneyTextMouseExited
        String customerMoneyStr = customerMoneyText.getText();
        if (customerMoneyStr.isBlank()) { // kiểm tra xemD textField có trống không
            customerMoneyWarningCheck = false;
            return;
        } else if (!ctions.checkIfAValidNumberForGUI(customerMoneyStr)) {// kiểm tra xem có phải số hợp lệ hay không
            customerMoneyWarningCheck = false;
            insertWarningToTextField(customerMoneyText, INVALID_WARNING, 12);
            return;
        }
        BigDecimal customerMoney = new BigDecimal(customerMoneyStr);
        if (insufficientCustomerMoneyCheck(customerMoney)) {
            return;
        }
        order.setCusMoney(customerMoney);
        customerMoneyWarningCheck = true;
        discountText.requestFocus();
        loadMainFee(order);
    }//GEN-LAST:event_customerMoneyTextMouseExited

    private void discountTextMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_discountTextMouseExited
        String discountStr = discountText.getText();
        if (!ctions.checkIfAValidNumberForGUI(discountStr) && !discountStr.isBlank()) {// kiểm tra xem có phải số hợp lệ hay không
            discountWarningCheck = false;
            insertWarningToTextField(discountText, INVALID_WARNING, 12);
            return;
        }
        if (discountStr.isBlank()) {
            order.setDiscount(0);
            return;
        }
        order.setDiscount(Math.min(100, Integer.parseInt(discountStr)));
        discountWarningCheck = true;
        loadMainFee(order);
        payBtn.requestFocus();
    }//GEN-LAST:event_discountTextMouseExited

    private void pointDiscountTextMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_pointDiscountTextMouseExited
        String pointDiscountStr = pointDiscountText.getText();
        if (!ctions.checkIfANumberSequenceForGUI(pointDiscountStr) && !pointDiscountStr.isBlank()) {// kiểm tra xem có phải số hợp lệ hay không
            insertWarningToTextField(pointDiscountText, INVALID_WARNING, 12);
            pointDiscountWarningCheck = false;
            return;
        }
        if (pointDiscountStr.isBlank()) {
            order.setPointDiscount(BigInteger.ZERO);
            return;
        }
        pointDiscountWarningCheck = true;
        BigInteger usedPoint = new BigInteger(pointDiscountStr);
        BigInteger customerPoint = order.getCustomerCard().getPoint();
        order.setPointDiscount(usedPoint.compareTo(customerPoint) >= 0 ? customerPoint : usedPoint);
        pointDiscountText.setText(order.getPointDiscount() + "");
        loadMainFee(order);
    }//GEN-LAST:event_pointDiscountTextMouseExited

    private void customerIDTextKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_customerIDTextKeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            checkCustomerIDBtnActionPerformed(null);
        }
    }//GEN-LAST:event_customerIDTextKeyPressed

    private void searchBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_searchBtnActionPerformed
        keyWarningLabel.setVisible(false);
        String keyString = keyWordTextField.getText();
        GoodsList<Goods> goodsList = new GoodsList<>();
        // Kiểm tra điều kiện
        if (draftGoodsList.getList().isEmpty()) {
            insertWarningToLabel(keyWarningLabel, EMPTY_LIST_WARNING);
            return;
        }
        if (keyString.isBlank()) {
            if (filterGoodsList != null) {
                insertGoodsListToGoodsListTable(filterGoodsList);
            } else {
                insertGoodsListToGoodsListTable(draftGoodsList);
            }
            return;
        }
        // thực hiện chức năng
        Object searchedObject = orderCtr.searchGoodsForGUI(keyString, draftGoodsList);
        if (searchedObject == null) {
            insertWarningToLabel(keyWarningLabel, NOTHING_FOUND_WARNING);
            return;
        } else if (searchedObject instanceof Goods goods) {
            goodsList.getList().add(goods);
        } else if (searchedObject instanceof GoodsList) {
            goodsList = (GoodsList<Goods>) searchedObject;
        }
        insertGoodsListToGoodsListTable(goodsList);
    }//GEN-LAST:event_searchBtnActionPerformed

    private void keyWordTextFieldKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_keyWordTextFieldKeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            searchBtnActionPerformed(null);
        }
    }//GEN-LAST:event_keyWordTextFieldKeyPressed

    private void unitComboBoxItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_unitComboBoxItemStateChanged
        unitFilterCheck = unitComboBox.getSelectedIndex() != 0;
    }//GEN-LAST:event_unitComboBoxItemStateChanged

    private void editBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_editBtnActionPerformed
        keyWarningLabel.setVisible(false);
        String shipmentID = shipmentIDTextField.getText();
        String goodsID = goodsIDTextField.getText();
        String strQuantityAfter = quantityTextField.getText();
        // kiểm tra điều kiện
        if (shipmentID.isBlank()) { // kiểm tra xem shipment text field có trốn không
            insertWarningToLabel(keyWarningLabel,
                    NOTHING_CHOOSEN_WARNING);
            return;
        } else if (orderSelectedRow == -1) {// kiểm tra xem có chọn đúng bảng không
            insertWarningToLabel(keyWarningLabel,
                    CHOOSE_IN_GOODSLIST_TABLE);
            return;
        } else if (strQuantityAfter.isBlank()) { // kiểm tra xem ô số lượng có trống không
            insertWarningToTextField(quantityTextField, EMPTY_TEXT_FIELD_WARNING, 14);
            return;
        } else if (!ctions.checkIfANumberSequenceForGUI(strQuantityAfter)) { // kiểm tra xem có phải là số hợp lệ không
            insertWarningToTextField(quantityTextField, INVALID_WARNING, 14);
            return;
        }
        // lấy goods và shipment cần chỉnh sửa trong order
        Goods editedGoods = orderCtr.containGoods(order, goodsID);
        Shipment editedShipment = goodsCtr.containShipment(editedGoods, shipmentID);
        // lấy goods và shipment cùng ID với goods và shipment cần chỉnh sửa trong draftGoodsList
        Goods remainGoods = orderCtr.containGoods(draftGoodsList, goodsID);
        Shipment remainShipment = goodsCtr.containShipment(remainGoods, shipmentID);
        // lấy số lượng trước, sau và còn lại
        BigDecimal quantityBefore = editedShipment.getQuantity();
        BigDecimal quantityRemain = remainShipment.getQuantity();
        BigDecimal quantityAfter = new BigDecimal(strQuantityAfter);
        if (quantityAfter.compareTo(quantityBefore
                .add(quantityRemain)) > 0) {// kiểm tra xem trong kho còn đủ sản phẩm không
            insertWarningToTextField(quantityTextField, NOT_ENOUGH_QUANTITY, 14);
            return;
        }
        // thực hiện chức năng
        orderCtr.editOrderForGUI(draftGoodsList, order,
                remainShipment, editedGoods, editedShipment,
                quantityBefore, quantityAfter, quantityRemain);
        setDefaultValuesToComponentsInMainOrderFunctionPanel();
        insertGoodsListToOrderGoodsListTable(order);
        insertGoodsListToGoodsListTable(draftGoodsList);
        loadMainFee(order);
    }//GEN-LAST:event_editBtnActionPerformed

    private void resetOrderGoodsListActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_resetOrderGoodsListActionPerformed
        orderCtr.resetOrder(draftGoodsList, order);
        insertGoodsListToGoodsListTable(draftGoodsList);
        setDefaultValuesToComponentsInMainFeePanel();
        clearTableModel(orderGoodsListModel);
        filterGoodsList = null;
    }//GEN-LAST:event_resetOrderGoodsListActionPerformed

    private void removeBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_removeBtnActionPerformed
        keyWarningLabel.setVisible(false);
        String shipmentID = shipmentIDTextField.getText();
        // Kiểm tra điều kiện
        if (shipmentID.isBlank()) {// Kiểm tra xem đã chọn hay chưa
            insertWarningToLabel(keyWarningLabel,
                    NOTHING_CHOOSEN_WARNING);
            return;
        } else if (orderSelectedRow == -1) { // kiểm tra xem có chọn đúng bảng hay không
            insertWarningToLabel(keyWarningLabel, CHOOSE_IN_GOODSLIST_TABLE);
            return;
        }
        // thực hiện chức năng
        orderCtr.deleteFromOrderForGUI(repository, draftGoodsList,
                order, shipmentID, goodsIDTextField.getText());
        setDefaultValuesToComponentsInMainOrderFunctionPanel();
        insertGoodsListToOrderGoodsListTable(order);
        insertGoodsListToGoodsListTable(draftGoodsList);
        loadMainFee(order);
    }//GEN-LAST:event_removeBtnActionPerformed

    private void addBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_addBtnActionPerformed
        keyWarningLabel.setVisible(false);
        String shipmentID = shipmentIDTextField.getText();
        String goodsID = goodsIDTextField.getText();
        String quantity = quantityTextField.getText();
        // kiểm tra điều kiện
        if (shipmentID.isBlank()) { // kiểm tra xem shipmentID textField có trống không
            insertWarningToLabel(keyWarningLabel, NOTHING_CHOOSEN_WARNING);
            return;
        } else if (quantity.isBlank()) {// kiểm tra xem quantity có trống không
            insertWarningToTextField(quantityTextField, EMPTY_TEXT_FIELD_WARNING, 14);
            return;
        } else if (!ctions.checkIfANumberSequenceForGUI(quantity)) {// kiểm tra xem có phải số hợp lệ hay không
            insertWarningToTextField(quantityTextField, INVALID_WARNING, 14);
            return;
        } else if (ctions.checkIfNumberEqualZero(new BigDecimal(quantity))) {
            insertWarningToTextField(quantityTextField, INVALID_WARNING, 14);
            return;
        }
        Shipment addedShipment = goodsCtr.containShipment(
                orderCtr.containGoods(draftGoodsList, goodsID), shipmentID);
        if (ctions.checkIfNumberNegativeForGUI(// kiểm tra xem còn đủ số lượng không
                addedShipment.getQuantity().subtract(new BigDecimal(quantity)))) {
            insertWarningToTextField(quantityTextField, NOT_ENOUGH_QUANTITY, 14);
            return;
        }
        // thực hiện chức năng
        orderCtr.addToOrderForGUI(draftGoodsList, order, quantity, goodsID, shipmentID);
        setDefaultValuesToComponentsInMainOrderFunctionPanel();
        insertGoodsListToOrderGoodsListTable(order);
        if (filterGoodsList != null) {
            insertGoodsListToGoodsListTable(filterGoodsList);
        } else {
            insertGoodsListToGoodsListTable(draftGoodsList);
        }
        loadMainFee(order);
    }//GEN-LAST:event_addBtnActionPerformed

    private void quantityTextFieldKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_quantityTextFieldKeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            addBtnActionPerformed(null);
        }
    }//GEN-LAST:event_quantityTextFieldKeyPressed

    private void quantityTextFieldMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_quantityTextFieldMouseClicked
        textFieldMouseClick(quantityTextField, 14);
    }//GEN-LAST:event_quantityTextFieldMouseClicked

    private void priceRangeComboBoxItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_priceRangeComboBoxItemStateChanged
        rangeFilterCheck = priceRangeComboBox.getSelectedIndex() != 0;
    }//GEN-LAST:event_priceRangeComboBoxItemStateChanged

    private void productionDateRadioBtnItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_productionDateRadioBtnItemStateChanged
        fromDateTextField.setEditable(true);
        toDateTextField.setEditable(true);
        if (productionDateRadioBtn.isSelected()) {
            setDefaultOptionToTextField(fromDateTextField, 14);
            setDefaultOptionToTextField(toDateTextField, 14);
            fromDateTextField.setText(productionDateFrom);
            toDateTextField.setText(productionDateTo);
        }
    }//GEN-LAST:event_productionDateRadioBtnItemStateChanged

    private void fromDateTextFieldKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_fromDateTextFieldKeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            String fromDateStr = fromDateTextField.getText();
            if (productionDateRadioBtn.isSelected()) {
                if (!ctions.checkIfValidDate(fromDateStr)) {// kiểm tra dateString có hợp lệ không
                    insertWarningToTextField(fromDateTextField, INVALID_WARNING, 12);
                    productionDateFromValid = false;
                    productionDateFrom = "";
                    return;
                }
                productionDateFrom = fromDateStr;
                productionDateFromValid = true;
            } else if (expirDateRadioBtn.isSelected()) {
                if (!ctions.checkIfValidDate(fromDateStr)) {// kiểm tra dateString có hợp lệ không
                    insertWarningToTextField(fromDateTextField, INVALID_WARNING, 12);
                    expirationDateFromValid = false;
                    expirDateFrom = "";
                    return;
                }
                expirDateFrom = fromDateStr;
                expirationDateFromValid = true;
            }
        }
    }//GEN-LAST:event_fromDateTextFieldKeyPressed

    private void toDateTextFieldKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_toDateTextFieldKeyPressed
        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
            String toDateStr = toDateTextField.getText();
            if (productionDateRadioBtn.isSelected()) {
                if (!ctions.checkIfValidDate(toDateStr)) {// kiểm tra dateString có hợp lệ không
                    insertWarningToTextField(toDateTextField, INVALID_WARNING, 12);
                    productionDateToValid = false;
                    productionDateTo = "";
                    return;
                }
                productionDateTo = toDateStr;
                productionDateToValid = true;
            } else if (expirDateRadioBtn.isSelected()) {
                if (!ctions.checkIfValidDate(toDateStr)) {// kiểm tra dateString có hợp lệ không
                    insertWarningToTextField(toDateTextField, INVALID_WARNING, 12);
                    expirationDateToValid = false;
                    expirDateTo = "";
                    return;
                }
                expirDateTo = toDateStr;
                expirationDateToValid = true;
            }
        }
    }//GEN-LAST:event_toDateTextFieldKeyPressed

    private void expirDateRadioBtnItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_expirDateRadioBtnItemStateChanged
        fromDateTextField.setEditable(true);
        toDateTextField.setEditable(true);
        if (expirDateRadioBtn.isSelected()) {
            setDefaultOptionToTextField(fromDateTextField, 14);
            setDefaultOptionToTextField(toDateTextField, 14);
            fromDateTextField.setText(expirDateFrom);
            toDateTextField.setText(expirDateTo);
        }
    }//GEN-LAST:event_expirDateRadioBtnItemStateChanged

    private void fromDateTextFieldMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_fromDateTextFieldMouseExited
        String fromDateStr = fromDateTextField.getText();
        if (productionDateRadioBtn.isSelected()) {
            if (!ctions.checkIfValidDate(fromDateStr)) {// kiểm tra dateString có hợp lệ không
                insertWarningToTextField(fromDateTextField, INVALID_WARNING, 12);
                productionDateFromValid = false;
                productionDateFrom = "";
                return;
            }
            productionDateFrom = fromDateStr;
            productionDateFromValid = true;
        } else if (expirDateRadioBtn.isSelected()) {
            if (!ctions.checkIfValidDate(fromDateStr)) {// kiểm tra dateString có hợp lệ không
                insertWarningToTextField(fromDateTextField, INVALID_WARNING, 12);
                expirationDateFromValid = false;
                expirDateFrom = "";
                return;
            }
            expirDateFrom = fromDateStr;
            expirationDateFromValid = true;
        }
    }//GEN-LAST:event_fromDateTextFieldMouseExited

    private void fromDateTextFieldMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_fromDateTextFieldMouseClicked
        if (productionDateRadioBtn.isSelected()) {
            if (!productionDateFromValid) {
                textFieldMouseClick(fromDateTextField, 14);
            }
        } else if (expirDateRadioBtn.isSelected()) {
            if (!expirationDateFromValid) {
                textFieldMouseClick(fromDateTextField, 14);
            }
        }
    }//GEN-LAST:event_fromDateTextFieldMouseClicked

    private void toDateTextFieldMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_toDateTextFieldMouseClicked
        if (productionDateRadioBtn.isSelected()) {
            if (!productionDateToValid) {
                textFieldMouseClick(toDateTextField, 14);
            }
        } else if (expirDateRadioBtn.isSelected()) {
            if (!expirationDateToValid) {
                textFieldMouseClick(toDateTextField, 14);
            }
        }
    }//GEN-LAST:event_toDateTextFieldMouseClicked

    private void toDateTextFieldMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_toDateTextFieldMouseExited
        String toDateStr = toDateTextField.getText();
        if (productionDateRadioBtn.isSelected()) {
            if (!ctions.checkIfValidDate(toDateStr)) {// kiểm tra dateString có hợp lệ không
                insertWarningToTextField(toDateTextField, INVALID_WARNING, 12);
                productionDateToValid = false;
                productionDateTo = "";
                return;
            }
            productionDateTo = toDateStr;
            productionDateToValid = true;
        } else if (expirDateRadioBtn.isSelected()) {
            if (!ctions.checkIfValidDate(toDateStr)) {// kiểm tra dateString có hợp lệ không
                insertWarningToTextField(toDateTextField, INVALID_WARNING, 12);
                expirationDateToValid = false;
                expirDateTo = "";
                return;
            }
            expirDateTo = toDateStr;
            expirationDateToValid = true;
        }
    }//GEN-LAST:event_toDateTextFieldMouseExited

    private void filterBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_filterBtnActionPerformed
        filterGoodsList = orderCtr.makeDraftGoodsList(draftGoodsList);
        if (rangeFilterCheck) {
            String selectedRange = priceRangeComboBox.getSelectedItem().toString();
            CustomPair priceRange = settingsCtr.convertFromComparisonOperatorToRange(selectedRange);
            filterGoodsList = new FilterGoodsList(filterGoodsList)
                    .withinPriceRange((BigDecimal) priceRange.getK(), (BigDecimal) priceRange.getV());
        }
        if (unitFilterCheck) {
            String selectedUnit = unitComboBox.getSelectedItem().toString();
            filterGoodsList = new FilterGoodsList(filterGoodsList).withSameUnit(selectedUnit);
        }
        if (productionDateFromValid && productionDateToValid) {
            if (ctions.checkIfDateIsBeforeAnotherDate(productionDateFrom, productionDateTo)) {
                filterGoodsList = new FilterGoodsList(filterGoodsList)
                        .withinProductionDateRange(
                                LocalDate.parse(productionDateFrom, DateTimeFormatter.ofPattern(INPUT_DATE_PATTERN)),
                                LocalDate.parse(productionDateTo, DateTimeFormatter.ofPattern(INPUT_DATE_PATTERN)));
            }
        }
        if (expirationDateFromValid && expirationDateToValid) {
            if (ctions.checkIfDateIsBeforeAnotherDate(expirDateFrom, expirDateTo)) {
                filterGoodsList = new FilterGoodsList(filterGoodsList)
                        .withinExpirDateRange(
                                LocalDate.parse(expirDateFrom, DateTimeFormatter.ofPattern(INPUT_DATE_PATTERN)),
                                LocalDate.parse(expirDateTo, DateTimeFormatter.ofPattern(INPUT_DATE_PATTERN)));
            }
        }
        insertGoodsListToGoodsListTable(filterGoodsList);
    }//GEN-LAST:event_filterBtnActionPerformed

    private void filterSwitchRadioBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_filterSwitchRadioBtnActionPerformed
        if (filterSwitchRadioBtn.isSelected()) {
            priceRangeComboBox.setEnabled(true);
            unitComboBox.setEnabled(true);
            productionDateRadioBtn.setEnabled(true);
            expirDateRadioBtn.setEnabled(true);
            fromDateTextField.setEditable(true);
            toDateTextField.setEditable(true);
            filterBtn.setEnabled(true);
        } else {
            filterGoodsList = null;
            priceRangeComboBox.setEnabled(false);
            unitComboBox.setEnabled(false);
            productionDateRadioBtn.setEnabled(false);
            expirDateRadioBtn.setEnabled(false);
            fromDateTextField.setEditable(false);
            toDateTextField.setEditable(false);
            filterBtn.setEnabled(false);
        }
    }//GEN-LAST:event_filterSwitchRadioBtnActionPerformed

    private void textFieldMouseClick(javax.swing.JTextField textField, int size) {
        setDefaultOptionToTextField(textField, size);
        textField.setEditable(true);
    }

    private void setDefaultOptionToTextField(javax.swing.JTextField textField, int size) {
        textField.setFont(new java.awt.Font("Segoe UI", 0, size)); // NOI18N
        textField.setForeground(new java.awt.Color(0, 0, 0));
        textField.setHorizontalAlignment(javax.swing.JTextField.CENTER);
        textField.setText("");
    }

    private boolean insufficientCustomerMoneyCheck(BigDecimal customerMoney) {
        if (paymentOptionCombobox.getSelectedIndex() == 0) {
            if (orderCtr.getTotal(order, settings.getStore()).compareTo(customerMoney) == 1) {
                insertWarningToTextField(customerMoneyText, INSUFFICIENT_MONEY, 12);
                customerMoneyWarningCheck = false;
                return true;
            }
        }
        return false;
    }

    private void insertWarningToLabel(javax.swing.JLabel label, String warningText) {
        label.setText(warningText);
        label.setVisible(true);
    }

    private void insertWarningToTextField(javax.swing.JTextField textField, String warningText, int size) {
        textField.setFont(new java.awt.Font("Segoe UI", 2, size)); // NOI18N
        textField.setForeground(new java.awt.Color(255, 0, 51));
        textField.setText(warningText);
        textField.setEditable(false);
    }

    private void insertGoodsListToGoodsListTable(GoodsList<Goods> goodsList) {
        clearTableModel(goodsListModel);
        for (Goods goods : goodsList.getList()) {
            int size = goods.getShipments().size();
            for (int i = 0; i < size; i++) {
                Shipment shipment = goods.getShipments().get(i);
                if (i == 0) {
                    insertNewGoodsToGoodsListTable(goods, shipment);
                } else {
                    insertExistedGoodsToGoodsListTable(shipment);
                }
            }
        }
    }

    private void insertNewGoodsToGoodsListTable(Goods goods, Shipment shipment) {
        goodsListModel.addRow(new Object[]{
            goods.getID(),
            goods.getGoodsName(),
            goods.getManufacture(),
            goods.getUnit(),
            goods.getListPrice(),
            shipment.getID(),
            shipment.getNsx().format(DateTimeFormatter.ofPattern(OUTPUT_DATE_PATTERN)),
            shipment.getHsd().format(DateTimeFormatter.ofPattern(OUTPUT_DATE_PATTERN)),
            shipment.getQuantity()
        });
    }

    private void insertExistedGoodsToGoodsListTable(Shipment shipment) {
        goodsListModel.addRow(new Object[]{
            "",
            "",
            "",
            "",
            "",
            shipment.getID(),
            shipment.getNsx().format(DateTimeFormatter.ofPattern(OUTPUT_DATE_PATTERN)),
            shipment.getHsd().format(DateTimeFormatter.ofPattern(OUTPUT_DATE_PATTERN)),
            shipment.getQuantity()
        });
    }

    private void insertGoodsListToOrderGoodsListTable(GoodsList<Goods> orderGoodsList) {
        clearTableModel(orderGoodsListModel);
        for (Goods goods : orderGoodsList.getList()) {
            int size = goods.getShipments().size();
            for (int i = 0; i < size; i++) {
                Shipment shipment = goods.getShipments().get(i);
                if (i == 0) {
                    insertNewGoodsToOrderGoodsListTable(goods, shipment);
                } else {
                    insertExistedGoodsToOrderGoodsListTable(shipment);
                }
            }
        }
    }

    private void insertNewGoodsToOrderGoodsListTable(Goods goods, Shipment shipment) {
        orderGoodsListModel.addRow(new Object[]{
            goods.getID(),
            goods.getGoodsName(),
            goodsCtr.getTotalQuanByShipments(goods),
            goods.getUnit(),
            goods.getListPrice(),
            shipment.getID(),
            shipment.getQuantity(),});
    }

    private void insertExistedGoodsToOrderGoodsListTable(Shipment shipment) {
        orderGoodsListModel.addRow(new Object[]{
            "",
            "",
            "",
            "",
            "",
            shipment.getID(),
            shipment.getQuantity()
        });
    }

    private void clearTableModel(DefaultTableModel tableModel) {
        int numberOfRow = tableModel.getRowCount();
        for (int i = 0; i < numberOfRow; i++) {
            tableModel.removeRow(0);
        }
    }

    private void setDefaultValuesToComponentsInMainOrderFunctionPanel() {
        fromDateTextField.setText("");
        toDateTextField.setText("");
        keyWordTextField.setText("");
        goodsIDTextField.setText("");
        shipmentIDTextField.setText("");
        quantityTextField.setText("");
    }

    private void setDefaultValuesToComponentsInSubFeePanel() {
        paymentOptionCombobox.setSelectedIndex(0);
        if (taxBindWithShift) {
            taxText.setText(shift.getTax() + "");
        } else {
            taxText.setText("");
        }
        shippingFeeText.setText("");
        customerMoneyText.setText("");
        discountText.setText("");
        pointDiscountText.setText("");
    }

    private void setDefaultValuesToComponentsInMainFeePanel() {
        subTotalTextField.setText("0.0");
        taxAmountTextField.setText("0.0");
        discountAmountTextField.setText("0.0");
        pointDiscountAmountTextField.setText("0.0");
        totalTextField.setText("0.0");
        changeAmountTextField.setText("0.0");
    }

    private void setDefaultValuesToComponentsInEmployeeAndCustomerPanel() {
        employeeListComboBox.setSelectedIndex(0);
        if (cashierBindWithShift) {
            cashierPhoneNumText.setText(shift.getCashier().toString());
        } else {
            cashierPhoneNumText.setText("");
        }
        customerIDText.setText("");
        customerPointCheckTextField.setText("");
    }

    private void setDefaultValuesToAllComponents() {
        pointDiscountText.setEditable(false);
        setDefaultValuesToComponentsInMainOrderFunctionPanel();
        setDefaultValuesToComponentsInSubFeePanel();
        setDefaultValuesToComponentsInMainFeePanel();
        setDefaultValuesToComponentsInEmployeeAndCustomerPanel();
    }

    private void loadMainFee(Order order) {
        subTotalTextField.setText(String.format("%.1f", orderCtr.getSubTotal(order)));
        taxAmountTextField.setText(String.format("%.1f", orderCtr.getTaxAmount(order)));
        discountAmountTextField.setText(String.format("%.1f", orderCtr.getDiscountAmount(order)));
        pointDiscountAmountTextField.setText(String.format("%.1f", 
                orderCtr.getPointDiscountAmount(order, settings.getStore())));
        totalTextField.setText(String.format("%.1f", orderCtr.getTotal(order, settings.getStore())));
        BigDecimal change = (order.getPaymentOptions().compareTo(PaymentOptions.OTHER_PAYMENT) == 0)
                ? BigDecimal.ZERO : orderCtr.getChange(order, settings.getStore());
        changeAmountTextField.setText(String.format("%.1f", change));
    }

    private void passValueToEmployeeListComboBox() {
        employeeList.getList().stream().forEach(
                employee -> employeeListComboBox.insertItemAt(employee.toString(),
                        employeeListComboBox.getItemCount()));
    }

    private void passValueToUnitCombobox() {
        units.getBucket().stream().forEach(
                x -> unitComboBox.insertItemAt(x,
                        unitComboBox.getItemCount()));
    }

    private void passValueToPriceRangeComboBox() {
        settings.getPriceAmountList().stream().forEach(
                x -> priceRangeComboBox.insertItemAt(x,
                        priceRangeComboBox.getItemCount()));
    }

    private void computeSizeOfEachColumnInGoodsListTable() {
        // duyet tu dau den cuoi mang de tim MAX_SIZE cua giatri input tung thuoc tinh
        for (Goods goods : draftGoodsList.getList()) {
            if (goods.getID().length() > goodsIDMaxSize) {
                goodsIDMaxSize = goods.getID().length();
            }
            if (goods.getGoodsName().length() > goodsNameMaxSize) {
                goodsNameMaxSize = goods.getGoodsName().length();
            }
            if (goods.getManufacture().length() > manufactureMaxSize) {
                manufactureMaxSize = goods.getManufacture().length();
            }
            if (goods.getUnit().length() > unitMaxSize) {
                unitMaxSize = goods.getUnit().length();
            }
            if (String.format(".1f", goods.getListPrice()).length() > listPriceMaxSize) {
                listPriceMaxSize = String.format(".1f", goods.getListPrice()).length();
            }
            for (Shipment shipment : goods.getShipments()) {
                if (shipment.getID().length() > shipmentIDMaxSize) {
                    shipmentIDMaxSize = shipment.getID().length();
                }
                if (shipment.getNsx().format(DateTimeFormatter.ofPattern(OUTPUT_DATE_PATTERN)).length() > productionDateMaxSize) {
                    productionDateMaxSize = shipment.getNsx().format(DateTimeFormatter.ofPattern(OUTPUT_DATE_PATTERN)).length();
                }
                if (shipment.getHsd().format(DateTimeFormatter.ofPattern(OUTPUT_DATE_PATTERN)).length() > expirationDateMaxSize) {
                    expirationDateMaxSize = shipment.getHsd().format(DateTimeFormatter.ofPattern(OUTPUT_DATE_PATTERN)).length();
                }
                if (String.format(".1f", shipment.getQuantity()).length() > shipmentQuantityMaxSize) {
                    shipmentQuantityMaxSize = String.format(".1f", shipment.getQuantity()).length();
                }
            }
        }
        int jscrollPaneMaxWidthSize = goodsIDMaxSize + goodsNameMaxSize + manufactureMaxSize + unitMaxSize + listPriceMaxSize + shipmentIDMaxSize + productionDateMaxSize + expirationDateMaxSize + shipmentQuantityMaxSize;
        goodsListTable.getColumnModel().getColumn(0).setPreferredWidth(goodsIDMaxSize);
        goodsListTable.getColumnModel().getColumn(1).setPreferredWidth(goodsNameMaxSize);
        goodsListTable.getColumnModel().getColumn(2).setPreferredWidth(manufactureMaxSize);
        goodsListTable.getColumnModel().getColumn(3).setPreferredWidth(unitMaxSize);
        goodsListTable.getColumnModel().getColumn(4).setPreferredWidth(listPriceMaxSize);
        goodsListTable.getColumnModel().getColumn(5).setPreferredWidth(shipmentIDMaxSize);
        goodsListTable.getColumnModel().getColumn(6).setPreferredWidth(productionDateMaxSize);
        goodsListTable.getColumnModel().getColumn(7).setPreferredWidth(expirationDateMaxSize);
        goodsListTable.getColumnModel().getColumn(8).setPreferredWidth(shipmentQuantityMaxSize);
        goodsListTable.getColumnModel().getColumn(0).setWidth(goodsIDMaxSize);
        goodsListTable.getColumnModel().getColumn(1).setWidth(goodsNameMaxSize);
        goodsListTable.getColumnModel().getColumn(2).setWidth(manufactureMaxSize);
        goodsListTable.getColumnModel().getColumn(3).setWidth(unitMaxSize);
        goodsListTable.getColumnModel().getColumn(4).setWidth(listPriceMaxSize);
        goodsListTable.getColumnModel().getColumn(5).setWidth(shipmentIDMaxSize);
        goodsListTable.getColumnModel().getColumn(6).setWidth(productionDateMaxSize);
        goodsListTable.getColumnModel().getColumn(7).setWidth(expirationDateMaxSize);
        goodsListTable.getColumnModel().getColumn(8).setWidth(shipmentQuantityMaxSize);
        goodListScrollPane.getViewport().setSize(new Dimension(jscrollPaneMaxWidthSize, 402));
        goodsListTable.setSize(new Dimension(jscrollPaneMaxWidthSize, 402));
    }

    private void initNewOrder() {
        // Tạo order mới
        order = orderCtr.makeNewOrderForGUI(shift, idGenerator);
        order.setCashier(cashier);
        order.setTax(tax);
        order.setPaymentOptions(PaymentOptions.CASH_PAYMENT);
        // Tạo danh sách nháp để làm việc
        // sau khi kết thúc order sẽ xử lý số liệu vào danh sách chính
        draftGoodsList = orderCtr.makeDraftGoodsList(repository);
        // reset lại toàn bộ components theo order mới
        passValueToUnitCombobox();
        passValueToPriceRangeComboBox();
        passValueToEmployeeListComboBox();
        orderIDTextField.setText(order.getID());
        setDefaultValuesToAllComponents();
        clearTableModel(orderGoodsListModel);
        computeSizeOfEachColumnInGoodsListTable();
        insertGoodsListToGoodsListTable(draftGoodsList);
    }

    private void initVariables() {
        // set các visible, editable, enable là false khi khởi tạo
        priceRangeComboBox.setEnabled(false);
        unitComboBox.setEnabled(false);
        productionDateRadioBtn.setEnabled(false);
        expirDateRadioBtn.setEnabled(false);
        fromDateTextField.setEditable(false);
        toDateTextField.setEditable(false);
        filterBtn.setEnabled(false);
        keyWarningLabel.setVisible(false);
        // set các biến khác được sử dụng 
        goodListScrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS);
        goodListScrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        goodsListModel = (DefaultTableModel) goodsListTable.getModel();
        orderGoodsListScrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS);
        orderGoodsListScrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        orderGoodsListModel = (DefaultTableModel) orderGoodsListTable.getModel();
        orderCtr = new OrderController();
        goodsCtr = new GoodsController();
        settingsCtr = new SettingsController();
        customerCardListCtr = new CustomerCardListController();
        ctions = new Cautions();
        realTimeClock();
    }

    public void passData(Repository repository, IDGenerator idGenerator,
            Settings settings, Shift shift, Units units,
            CustomerCardList cutomerCardList, EmployeeList employeeList) {
        this.repository = repository;
        this.idGenerator = idGenerator;
        this.settings = settings;
        this.shift = shift;
        this.units = units;
        this.cutomerCardList = cutomerCardList;
        this.employeeList = employeeList;
        //
        initNewOrder();
    }

    public void setCashierBindWithShift(boolean check) {
        employeeListComboBox.setEditable(!check);
        cashierBindWithShift = check;
        if (check) {
            cashierPhoneNumText.setText(cashier.toString());
            cashier = shift.getCashier();
        } else {
            cashierPhoneNumText.setText(employeeListComboBox.getItemAt(0));
        }
    }

    public void setVATBindWithStore(boolean check) {
        taxText.setEditable(!check);
        taxBindWithShift = check;
        if (check) {
            taxText.setText(settings.getStore().getVAT() + "");
            tax = shift.getTax();
        }
        taxText.setText(tax + "");
    }

    private void realTimeClock() {
        new Thread() {
            @Override
            public void run() {
                try {
                    while (true) {
                        LocalDateTime curDateTime = LocalDateTime.now();
                        timeTextField.setText(curDateTime.format(DateTimeFormatter.ofPattern("h:mm:ss a")));
                        dateTextField.setText(curDateTime.format(DateTimeFormatter.ofPattern("dd/MM/yyyy")));
                        Thread.sleep(1000);
                    }
                } catch (InterruptedException ex) {
                    Logger.getLogger(PurchasePanel.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }.start();
    }

    private int orderSelectedRow = -1;
    private Employee cashier;
    private int tax;
    private String productionDateFrom;
    private String productionDateTo;
    private String expirDateFrom;
    private String expirDateTo;
    private boolean rangeFilterCheck = false;
    private boolean productionDateFromValid = false;
    private boolean productionDateToValid = false;
    private boolean expirationDateFromValid = false;
    private boolean expirationDateToValid = false;
    private boolean unitFilterCheck = false;
    private boolean pointDiscountWarningCheck = false;
    private boolean discountWarningCheck = false;
    private boolean taxWarningCheck = false;
    private boolean shippingFeeWarningCheck = false;
    private boolean customerIDWarningCheck = false;
    private boolean customerMoneyWarningCheck = false;
    private boolean cashierBindWithShift;
    private boolean taxBindWithShift;
    private boolean ifCashPayment = true;
    private Order order;
    private Cautions ctions;
    private GoodsList<Goods> filterGoodsList;
    private GoodsList<Goods> draftGoodsList;
    private OrderController orderCtr;
    private GoodsController goodsCtr;
    private SettingsController settingsCtr;
    private CustomerCardListController customerCardListCtr;
    private DefaultTableModel orderGoodsListModel;
    private DefaultTableModel goodsListModel;
    private int goodsIDMaxSize = "Mã SP".length();
    private int goodsNameMaxSize = "Tên SP".length();
    private int manufactureMaxSize = "Nhà sx".length();
    private int unitMaxSize = "ĐV".length();
    private int listPriceMaxSize = "Giá Bán/ĐV".length();
    private int shipmentIDMaxSize = "Mã lô".length();
    private int productionDateMaxSize = "Ngày sx".length();
    private int expirationDateMaxSize = "Hạn SD".length();
    private int shipmentQuantityMaxSize = "SL".length();
    private Repository repository;
    private Shift shift;
    private CustomerCardList cutomerCardList;
    private EmployeeList employeeList;
    private IDGenerator idGenerator;
    private Settings settings;
    private Units units;
    final String INPUT_DATE_PATTERN = "d/M/y";
    final String OUTPUT_DATE_PATTERN = "dd/MM/yyyy";
    private final String EMPTY_LIST_WARNING = "Danh sách trống!";
    private final String NOTHING_FOUND_WARNING = "Không tìm thấy từ khóa!";
    private final String NOTHING_CHOOSEN_WARNING = "Bạn chưa chọn mặt hàng nào!";
    private final String EMPTY_TEXT_FIELD_WARNING = "Ô nhập Trống!";
    private final String INVALID_WARNING = "Không hợp lệ!";
    private final String NOT_ENOUGH_QUANTITY = "Không đủ số lượng!";
    private final String CHOOSE_IN_GOODSLIST_TABLE = "Chọn ở bảng hóa đơn!";
    private final String CUSTOMER_CARD_NOT_EXIST = "Thẻ không tồn tại!";
    private final String NONE_SELECTED_CASHIER = "Chưa chọn thu ngân!";
    private final String INSUFFICIENT_MONEY = "Số dư âm!";
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel aboutGoodsAndCusPanel;
    private javax.swing.JPanel aboutOrderPanel;
    private javax.swing.JButton addBtn;
    private javax.swing.JLabel cashierPhoneNumLabel;
    private javax.swing.JTextField cashierPhoneNumText;
    private javax.swing.JLabel changeAmountLabel;
    private javax.swing.JTextField changeAmountTextField;
    private javax.swing.JButton checkCustomerIDBtn;
    private javax.swing.JLabel customerIDLabel;
    private javax.swing.JTextField customerIDText;
    private javax.swing.JLabel customerMoneyLabel;
    private javax.swing.JTextField customerMoneyText;
    private javax.swing.JTextField customerPointCheckTextField;
    private javax.swing.JLabel customerPointLabel;
    private javax.swing.JLabel dateLabel;
    private javax.swing.JFormattedTextField dateTextField;
    private javax.swing.JLabel discountAmountLabel;
    private javax.swing.JTextField discountAmountTextField;
    private javax.swing.JLabel discountLabel;
    private javax.swing.JTextField discountText;
    private javax.swing.JButton editBtn;
    private javax.swing.JPanel employeeAndCustomerPanel;
    private javax.swing.JComboBox<String> employeeListComboBox;
    private javax.swing.JLabel employeeRoleLabel;
    private javax.swing.JRadioButton expirDateRadioBtn;
    private javax.swing.JPanel feePanel;
    private javax.swing.JButton filterBtn;
    private javax.swing.JRadioButton filterSwitchRadioBtn;
    private javax.swing.JTextField fromDateTextField;
    private javax.swing.JLabel fromLabel;
    private javax.swing.JScrollPane goodListScrollPane;
    private javax.swing.JLabel goodsIDLabel;
    private javax.swing.JTextField goodsIDTextField;
    private javax.swing.JTable goodsListTable;
    private javax.swing.JPanel goodsPanel;
    private javax.swing.JPanel invoiceDetailPanel;
    private javax.swing.JPanel invoiceInforPanel;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JSeparator jSeparator2;
    private javax.swing.JSeparator jSeparator3;
    private javax.swing.JLabel keyWarningLabel;
    private javax.swing.JLabel keyWordLabel;
    private javax.swing.JTextField keyWordTextField;
    private javax.swing.JPanel mainFeePanel;
    private javax.swing.JPanel mainOrderFunctionPanel;
    private javax.swing.JPanel orderDisplayPanel;
    private javax.swing.JScrollPane orderGoodsListScrollPane;
    private javax.swing.JTable orderGoodsListTable;
    private javax.swing.JLabel orderIDLabel;
    private javax.swing.JTextField orderIDTextField;
    private javax.swing.JButton payAnfPrintBtn;
    private javax.swing.JButton payBtn;
    private javax.swing.JComboBox<String> paymentOptionCombobox;
    private javax.swing.JLabel paymentOptionLabel;
    private javax.swing.JLabel pointDiscountAmountLabel;
    private javax.swing.JTextField pointDiscountAmountTextField;
    private javax.swing.JLabel pointDiscountLabel;
    private javax.swing.JTextField pointDiscountText;
    private javax.swing.JComboBox<String> priceRangeComboBox;
    private javax.swing.JLabel priceRangeLabel;
    private javax.swing.ButtonGroup proAndExpirDateBtnGroup;
    private javax.swing.JRadioButton productionDateRadioBtn;
    private javax.swing.JLabel quantityLabel;
    private javax.swing.JTextField quantityTextField;
    private javax.swing.JButton removeBtn;
    private javax.swing.JButton resetOrderGoodsList;
    private javax.swing.JButton searchBtn;
    private javax.swing.JLabel shipmentIDLabel;
    private javax.swing.JTextField shipmentIDTextField;
    private javax.swing.JLabel shippingFeeLabel;
    private javax.swing.JTextField shippingFeeText;
    private javax.swing.JPanel subFeePanel;
    private javax.swing.JLabel subTotalLabel;
    private javax.swing.JTextField subTotalTextField;
    private javax.swing.JLabel taxAmountLabel;
    private javax.swing.JTextField taxAmountTextField;
    private javax.swing.JLabel taxLabel;
    private javax.swing.JTextField taxText;
    private javax.swing.JLabel timeLabel;
    private javax.swing.JFormattedTextField timeTextField;
    private javax.swing.JTextField toDateTextField;
    private javax.swing.JLabel toLabel;
    private javax.swing.JLabel totalLabel;
    private javax.swing.JTextField totalTextField;
    private javax.swing.JComboBox<String> unitComboBox;
    private javax.swing.JLabel unitLabel;
    // End of variables declaration//GEN-END:variables
}
